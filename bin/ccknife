#!/usr/bin/env ruby
require 'pathname'

# if we have bundler binstubs use that; otherwise attempt to detect
if File.exists?("bin/knife")
  knife = "bin/knife"
else
  knife = %x(command -v knife).strip
end

knife_rb = Pathname.new(File.join(Dir.pwd, ".cucumber-chef/knife.rb")).expand_path
command = [knife, ARGV, "-c #{knife_rb}", "2>&1"].flatten.compact.join(" ")
puts command
puts %x(#{command})
